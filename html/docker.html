<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker</title>
    <link rel="stylesheet" href="css/docker.css">
</head>
<body>
    <div align="center">
        <img src="jpg/docker.jpg"  width="500" height="500">
    </div>
    <h1>Как устроен Docker и почему он популярен</h1>   
        <p>Docker — это платформа контейнеризации с открытым исходным кодом, с помощью которой можно автоматизировать создание приложений, их доставку и управление. Платформа позволяет быстрее тестировать и выкладывать приложения, запускать на одной машине требуемое количество контейнеров.
    У контейнеризации и виртуализации есть сходство, но есть и различия. Виртуализация напоминает отдельный компьютер со своим оборудованием и ОС, внутри которого можно запустить еще одну ОС. А контейнеризация предполагает, что виртуальная среда запускается из ядра ОС, не предусматривает виртуализации оборудования и снижает потребление ресурсов.
    Существуют решения вроде Yandex Serverless Containers которые позволяют запускать контейнеры без создания виртуальных машин и кластеров Kubernetes. Платформа избавляет пользователей от необходимости заниматься рефакторингом и отменяет ограничения на использование языков программирования.</p>
    <h2>Особенности контейнеров</h2>
        <p>Важнейшая особенность контейнеров — их сравнительно короткий жизненный цикл. Любой контейнер можно остановить, перезапустить или уничтожить, если это необходимо. Данные, которые содержатся в контейнере, при этом тоже пропадут. Так выработалось правило проектирования приложений: не хранить важные данные в контейнере. Такой подход называют Stateless.
    Объем контейнеров измеряется в мегабайтах, поскольку в них упаковывают лишь те процессы и зависимости ОС, которые необходимы для выполнения кода. Легковесные контейнеры быстро запускаются и экономят место на диске.
    Один контейнер соответствует одному запущенному процессу. Отключение отдельного контейнера для отладки или обновления никак не помешает нормальной работе всего приложения.
    Контейнеризация обеспечивает надежную изоляцию процессов и повышает уровень безопасности систем. Приложения, которые работают внутри контейнера, не имеют доступа к основной ОС и не могут на неё влиять.
    Благодаря контейнерам можно автоматизировать развертывание приложений на разных хостах.
    Использование контейнеров позволяет перейти с монолита на микросервисную архитектуру. За счет этого ускоряется разработка новой функциональности, поскольку нет опасений, что изменения в одной компоненте затронут всю остальную систему.
    С точки зрения эффективности контейнеры котируются выше виртуальных машин. На одинаковом оборудовании можно запустить большое количество контейнеров, тогда как ВМ будет в разы меньше. Это важно при использовании облачной инфраструктуры — потребуется меньше ресурсов.</p>
    <h2>Преимущества использования Docker</h2>
        <ol>
            <li><b>Гибкость и адаптивность.</b>Благодаря Docker можно легко запускать контейнер в облачной инфраструктуре и на любом локальном устройстве. Можно создать базовые шаблоны контейнеров и использовать повторно бесконечное число раз. Бесшовная переносимость и простота развертывания — важные преимущества этой технологии.</li>
            <li><b>Меньше ошибок и несовпадений окружений.</b>В контейнерах Docker содержится всё, что требуется для запуска приложения, поэтому перенос приложений из одной среды в другую не вызывает затруднений. Исчезает проблема, когда у разработчиков всё функционирует как надо, а на боевом сервере — нет. Пример того, как это помогает в бизнесе, от компании «Бухта».</li>
            <li><b>Скорость развертывания.</b>Так как настраивать окружение для разработки, тестирования и боевого режима больше не нужно, время развертывания сокращается в несколько раз.</li>
            <li><b>Рост универсальности.</b>Docker позволяет использовать любые языки программирования и стек технологий на сервере, избавляя от проблемы несовместимости разных библиотек и технологий.</li>
            <li><b>Комьюнити и поддержка.</b>Существует огромная библиотека контейнеров с открытым исходным кодом. Можно скачать нужный образ для конкретной задачи или обратиться за помощью к большому комьюнити разработчиков, которые используют Docker.</li>
            <li><b>Непрерывность работы.</b>С учетом инструментов управления трафиком можно построить процесс обновления приложения так, чтобы обновление одних контейнеров не влияло на работоспособность системы и оказание услуг пользователям.</li>
            <li><b>Упрощение администрирования.</b>С помощью Docker легче перенести контейнер с одного хоста на другой, запустить сразу несколько образов, обновить группы контейнеров и откатиться к старой версии.</li>
            <li><b>Повышение уровня безопасности.</b>Контейнеры в Docker частично изолированы друг от друга на уровне процессов и ОС, поэтому запуск большого количества контейнеров на одной машине не несет рисков.</li>
            <li><b>Экономическая эффективность.</b>Контейнеры легковесны и производительны, а благодаря использованию Docker можно эффективнее управлять имеющимися ресурсами и сократить расходы компании.</li>
            <li><b>Современный подход.</b>Отказ от монолитной архитектуры в пользу микросервисной позволяет более гибко развивать продукт, добавлять в него новые функции.</li>
        </ol>
    <h2>Основные компоненты Docker</h2>
        <ul>
            <li><i>Dockerfile.</i>Текстовый файл с последовательно расположенными инструкциями для создания образа Docker. Файл создаётся по принципу «одна строка — одна команда».</li>
    
            <li><i>Daemon.</i>Фоновая служба на хосте, которая отвечает за создание, запуск и уничтожение контейнеров.</li>
    
            <li><i>Image.</i>Неизменяемый файл (образ), из которого можно неограниченное количество раз развернуть контейнер.</li>
    
            <li><i>Client.</i>Утилита командной строки в Docker для управления демоном. Любое взаимодействие с контейнером проходит через Daemon.</li>
    
            <li><i>Container.</i>Запущенное приложение, которое развернули из образа.</li>
    
            <li><i>Registry.</i>Служба в Docker, выполняющая функции репозитория (хранилища). Позволяет следить за версиями образов, создавать приватные репозитории.</li>
    
            <li><i>Docker Hub.</i>Популярный публичный репозиторий, используемый по умолчанию в Docker. Обеспечивает интеграцию с GitHub и BitBucket.</li>
    
            <li><i>Docker Desktop.</i>Приложение, позволяющее локально собирать, выполнять и тестировать контейнеры. Работает на Windows и macOS.</li>
    
            <li><i>Docker volumes.</i>Тома для постоянного хранения информации. По умолчанию в Docker папки хранилищ создаются на хост-машине, но предусмотрена и возможность подключения удаленных хранилищ. Использование томов позволяет лучшим образом настроить хранение данных.</li>
        </ul>
    <h2>Как устроен образ Docker</h2>
        <p>Базовый образ — главный элемент контейнеризации в Docker. В нем содержатся процессы и зависимости, необходимые для нормальной работы приложения. Разработчики предпочитают скачивать готовые образы из репозиториев, а не создавать их с нуля, так как уже есть огромное количество готовых компонент для самых разных задачи. Например, в Docker Hub уже загружено свыше 100 000 образов.
    На базовый образ в Docker один за другим накладываются доступные только для чтения слои, которые образуются после любых изменений в образе. Каждый новый слой — это актуальная версия образа. Получается, что финальный образ — это объединение всех слоев в один. Каждый слой образа сохраняется, чтобы при необходимости быстро откатываться назад. Такое решение экономит пространство диска и сокращает время сборки контейнера.</p>
    <h2>Создание образа Docker</h2>
        <p>Развертывать образ можно любое количество раз на любом хосте. Для создания образа используется один из двух способов: интерактивный или через Dockerfile.
    Интерактивный — простой способ, при котором разработчик сам изменяет среду окружения во время запуска контейнера. После запуска Docker в сессии терминала запустите оболочку контейнера (bash) командой docker run image_name: tag_name. Имя тега можно не указывать, тогда задействуется текущая версия образа.
    Вариант с Dockerfile сложнее. Вы уже знаете, что каждому образу присваивается свой Dockerfile. После указания нужных команд в Dockerfile, исключите в .dockerignore все файлы, не используемые в сборке. Затем создайте образ командой docker image build, присвойте ему имя и тег.</p>
    <h2>Сервисы для работы с контейнерами</h2>
        <p>Использование образов и контейнеров позволяет организовывать сложную архитектуру приложений. Чем сложнее проект, тем труднее им управлять. Есть сервисы, позволяющие упростить и автоматизировать работу с контейнерами.</p>
    <h3>Yandex Container Registry</h3>
        <p>Простой и безопасный сервис для хранения и распространения образов Docker автоматически реплицирует все данные, упрощает переход на микросервисную архитектуру и интеграцию с облачными сервисами. Поддерживает управление через интерфейс консоли, командной строки (CLI) и командной строки Docker на основе Docker Registry HTTP API V2, работу через API.
    Доступны контейнеры с ОС Linux и Windows, которые можно запускать локально или на виртуальных машинах Yandex Compute Cloud. Container Registry становится еще эффективнее, если пользоваться им в связке с сервисом для управления кластерами Kubernetes — Yandex Managed Service for Kubernetes.</p>
    <h3>Docker ComposeDocker Compose</h3>
        <p>В составе Docker есть инструмент, который позволяет централизованно запускать большое количество сервисов: Docker Compose. Документирование и конфигурирование сервисов приложения осуществляется с помощью текстового YAML-файла. Команда docker‑compose up развертывает сервисы приложений и создает из образа новые контейнеры, а также сети, тома и все конфигурации, указанные в файле Docker Compose.
    На этапе тестирования разработчикам приходится создавать изолированные среды, а потом уничтожать их. Docker Compose позволяет создать и уничтожить среду путем ввода нескольких команд. К участию в проекте можно привлекать и сторонних пользователей.</p>
    <h2>Оркестрация</h2>
        <p>Когда контейнеров становится слишком много, ими трудно управлять. На помощь приходят системы оркестрации.
    <h3>Docker SwarmDocker Swarm</h3>
        <p>Стандартная система оркестрации контейнеров, достаточная для решения базовых задач. Позволяет быстро создать из нескольких хостов с контейнерами последовательный кластер Swarm, считая все кластерные хосты единым контейнерным пространством. В Docker-кластере должна быть как минимум одна управляющая нода (manager).</p>
    <h3>KubernetesKubernetes</h3>
        <p>Платформа для автоматизации работы с контейнерами на Ubuntu, CentOS и других ОС Linux. Позволяет централизованно группировать контейнеры, балансировать нагрузку, активировать сервисы из сотен приложений одновременно. Kubernetes предоставляет пользователям больше возможностей по сравнению со Swarm, но и настраивать его сложнее.</p>
</body>
</html>